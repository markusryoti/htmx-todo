{{ template "base" . }} {{ define "title"}} Home {{end}} {{ define "body"}}

<h1 class="text-3xl font-bold">{{ .Name }}</h1>

<form
	hx-post="/todos/add"
	hx-target="#todo-list"
	hx-swap="beforeend"
	hx-on::after-request="this.reset()"
	class="py-4"
>
	<h4 class="text-xl">Add new</h4>
	<div class="py-2">
		<label for="add" class="block text-sm font-medium leading-6"
			>Todo Name</label
		>
		<input
			type="text"
			id="add"
			name="name"
			class="block flex-1 border-2 rounded-lg bg-transparent py-1.5 pl-1 text-gray-900 focus:ring-0"
		/>
	</div>
	<button
		type="submit"
		class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
	>
		Add
	</button>
</form>

<ul id="todo-list" class="py-4">
	{{ range $todo := .Todos}}
	<li id="todo-{{ $todo.Id }}">
		<span
			hx-patch="/todos/{{ .Id }}"
			hx-target="#todo-{{ .Id }}"
			hx-swap="outerHTML"
		>
			{{ if $todo.Done }}
			<span class="line-through"> {{ $todo.Name }} </span>
			{{ else }}
			<span> {{ $todo.Name }} </span>
			{{ end }}
		</span>
		<a
			hx-delete="/todos/{{ $todo.Id }}"
			hx-target="#todo-{{ .Id }}"
			hx-swap="delete"
		>
			X
		</a>
	</li>
	{{end}} {{ end }}
</ul>
